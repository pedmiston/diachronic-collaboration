---
title: "Bots"
author: "Pierce Edmiston"
output:
  html_document:
    theme: flatly
---

```{r config, include = FALSE}
library(knitr)
library(tidyverse)
library(magrittr)
library(grid)
library(gridExtra)
library(jsonlite)
library(totems)
library(crotchet)

opts_chunk$set(
  echo = FALSE,
  message = FALSE,
  warning = FALSE,
  results = "hide",
  fig.path = "modeling-figs/",
  fig.width = 6,
  fig.height = 3,
  cache.path = ".cache.modeling/"
)

read_chunk("R/bots.R")
```

```{r setup, include=FALSE}
```

# Team structures

```{r team-structures, fig.width = 2.5}
diagram_graphviz("team-structures", "totems")
```

# Experiments

## Replication

```{r}
data("BotsReplication")
grid.arrange(
  read_graphviz("calendar-hours", "totems"),
  gg_timeline %+% BotsReplication,
  gg_final %+% filter_final_round(BotsReplication),
  nrow = 1
)
```

## Strategy

```{r}
data("BotsStrategy")
gg_timeline %+% BotsStrategy
gg_final %+% filter_final_round(BotsStrategy)
```

## Team size

```{r}
data("BotsPlayers")
gg_final %+% filter_final_round(BotsPlayers)
(gg_timeline %+% filter_final_round(BotsPlayers)) +
  aes(n_players, inventory_size, color = strategy) +
  scale_x_continuous("team size", breaks = unique(BotsPlayers$n_players)) +
  theme(panel.grid.minor.x = element_blank())
```

## Number of guesses

```{r}
data("BotsGuesses")
gg_timeline %+% filter_final_round(BotsGuesses) +
  aes(n_guesses)
```

## Player and team memory

```{r, fig.height=6}
data("BotsMemory")

BotsMemory %<>%
  recode_memory()

gg_timeline %+% BotsMemory +
  facet_grid(team_memory_label ~ player_memory_label)

gg_final %+% filter_final_round(BotsMemory) +
  facet_grid(team_memory_label ~ player_memory_label)
```
